<div class="edit-task">
  <div class="category">
    <span>{{ selectedTask()?.category }}</span>
    <img src="assets/img/cancel.png" alt="" (click)="closeForm()" />
  </div>
  <article class="task-details">
    <h2 class="title">{{ selectedTask()?.title }}</h2>
    <p class="description">{{ selectedTask()?.description }}</p>
    <div class="task-type-text">
      <span> Due date: </span>
      <p>{{ selectedTask()?.dueDate }}</p>
    </div>
    <div class="task-type-text">
      <span>Priority:</span>
      <p>
        {{ selectedTask()?.priority }}
        <img [src]="'assets/img/prio-' + selectedPriority + '.png'" alt="" />
      </p>
    </div>
    <div class="assigned-to">
      @for (assigned of selectedTask()?.assignedTo; track $index) {
        <span class="assigned-initials">{{
          getContactInitials(assigned.displayName)
        }}</span>
      }
    </div>
    <div class="subtasks">
      @for (subtask of selectedTask()?.subtask?.open; track subtask.id) {
        <div class="subtask">
          <input
            type="checkbox"
            (change)="toggleSubtaskStatus(subtask, true)"
          />
          <span class="subtask-title">{{ subtask.subtaskValue }}</span>
        </div>
      }
    </div>

    <div class="subtasks-divider"></div>

    <div class="subtasks">
      @for (subtask of selectedTask()?.subtask?.done; track subtask.id) {
        <div class="subtask">
          <input
            type="checkbox"
            (change)="toggleSubtaskStatus(subtask, false)"
          />
          <span class="subtask-title">{{ subtask.subtaskValue }}</span>
        </div>
      }
    </div>
  </article>
</div>
